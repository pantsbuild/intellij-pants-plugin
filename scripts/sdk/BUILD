resources(
  name='plugin-resources',
  sources=globs('META-INF/plugin.xml', 'intellij-jps-plugin-system.jar')
)

jvm_binary(
  name='intellij-sdk-bin',
  basename='intellij-sdk',
  dependencies=[
    ':plugin-resources',
    '3rdparty/intellij:external-system-test-api',
    '3rdparty/intellij:sdk',
  ],
  deploy_excludes = [
    exclude('com.intellij.sdk.community', 'slf4j-api'),
    exclude('com.intellij.sdk.community', 'slf4j-log4j12'),
  ],
)

jvm_binary(
  name='intellij-junit-plugin-bin',
  basename='intellij-junit-plugin',
  dependencies=['3rdparty/intellij:junit-plugin'],
)

jvm_binary(
  name='intellij-python-plugin-bin',
  basename='intellij-python-plugin',
  dependencies=['3rdparty/intellij:python-plugin']
)

jvm_binary(
  name='intellij-scala-plugin-bin',
  basename='intellij-scala-plugin',
  dependencies=['3rdparty/intellij:scala-plugin'],
)

jvm_binary(
  name='intellij-pants-plugin-bin',
  basename='intellij-pants-plugin',
  dependencies=[
    'common',
    'tests:misc',
    'tests:jvm-integration',
    'tests:py-integration',
    'tests:metrics',
    'jps-plugin',
    'src:pants-intellij-plugin',
  ],
  deploy_excludes = [
    exclude('com.intellij.sdk.community', 'slf4j-api'),
    exclude('com.intellij.sdk.community', 'slf4j-log4j12'),
  ],
)

jvm_binary(
  name='intellij-pants-plugin-publish',
  basename='intellij-pants-plugin',
  dependencies=[
    'common',
    'jps-plugin',
    'src:pants-intellij-plugin',
  ],
  deploy_excludes = [
    # Frozen from 3rdparty/intellij::
    exclude('org.scala-lang', 'scala-library'),
    exclude('org.scala-lang', 'scala-actors'),
    exclude('org.scala-lang', 'scalap'),
    exclude('org.scala-lang', 'scala-compiler'),
    exclude('org.scala-lang', 'scala-reflect'),
    exclude('org.scala-lang', 'scala-library'),
    exclude('org.scala-lang', 'scala-reflect'),
    exclude('org.scala-lang', 'scala-compiler'),
    exclude('org.scala-lang', 'scala-reflect'),
    exclude('org.scala-lang', 'scala-library'),
    exclude('com.intellij.sdk.community', 'annotations'),
    exclude('com.intellij.sdk.community', 'asm'),
    exclude('com.intellij.sdk.community', 'asm-all'),
    exclude('com.intellij.sdk.community', 'asm-analysis'),
    exclude('com.intellij.sdk.community', 'asm-tree'),
    exclude('com.intellij.sdk.community', 'automaton'),
    exclude('com.intellij.sdk.community', 'batik-all'),
    exclude('com.intellij.sdk.community', 'bcprov-jdk15on-155'),
    exclude('com.intellij.sdk.community', 'boot'),
    exclude('com.intellij.sdk.community', 'bootstrap'),
    exclude('com.intellij.sdk.community', 'cglib-nodep'),
    exclude('com.intellij.sdk.community', 'cli-parser'),
    exclude('com.intellij.sdk.community', 'commons-codec'),
    exclude('com.intellij.sdk.community', 'commons-compress'),
    exclude('com.intellij.sdk.community', 'commons-httpclient'),
    exclude('com.intellij.sdk.community', 'commons-logging'),
    exclude('com.intellij.sdk.community', 'commons-net'),
    exclude('com.intellij.sdk.community', 'coverage-agent'),
    exclude('com.intellij.sdk.community', 'coverage-instrumenter'),
    exclude('com.intellij.sdk.community', 'coverage-util'),
    exclude('com.intellij.sdk.community', 'ecj'),
    exclude('com.intellij.sdk.community', 'extensions'),
    exclude('com.intellij.sdk.community', 'external-system-rt'),
    exclude('com.intellij.sdk.community', 'fluent-hc'),
    exclude('com.intellij.sdk.community', 'forms_rt'),
    exclude('com.intellij.sdk.community', 'groovy-all'),
    exclude('com.intellij.sdk.community', 'gson'),
    exclude('com.intellij.sdk.community', 'guava'),
    exclude('com.intellij.sdk.community', 'hamcrest-core'),
    exclude('com.intellij.sdk.community', 'httpclient'),
    exclude('com.intellij.sdk.community', 'httpcore'),
    exclude('com.intellij.sdk.community', 'httpmime'),
    exclude('com.intellij.sdk.community', 'icons'),
    exclude('com.intellij.sdk.community', 'idea'),
    exclude('com.intellij.sdk.community', 'idea_rt'),
    exclude('com.intellij.sdk.community', 'imgscalr-lib'),
    exclude('com.intellij.sdk.community', 'isorelax'),
    exclude('com.intellij.sdk.community', 'javac2'),
    exclude('com.intellij.sdk.community', 'jaxen'),
    exclude('com.intellij.sdk.community', 'jayatana'),
    exclude('com.intellij.sdk.community', 'jcip-annotations'),
    exclude('com.intellij.sdk.community', 'jdkAnnotations'),
    exclude('com.intellij.sdk.community', 'jdom'),
    exclude('com.intellij.sdk.community', 'jgoodies-common'),
    exclude('com.intellij.sdk.community', 'jgoodies-forms'),
    exclude('com.intellij.sdk.community', 'jgoodies-looks'),
    exclude('com.intellij.sdk.community', 'jh'),
    exclude('com.intellij.sdk.community', 'jimfs'),
    exclude('com.intellij.sdk.community', 'jing'),
    exclude('com.intellij.sdk.community', 'jna-platform'),
    exclude('com.intellij.sdk.community', 'jna'),
    exclude('com.intellij.sdk.community', 'jps-builders'),
    exclude('com.intellij.sdk.community', 'jps-launcher'),
    exclude('com.intellij.sdk.community', 'jps-model'),
    exclude('com.intellij.sdk.community', 'jsch'),
    exclude('com.intellij.sdk.community', 'jsch.agentproxy.connector-factory'),
    exclude('com.intellij.sdk.community', 'jsch.agentproxy.core'),
    exclude('com.intellij.sdk.community', 'jsch.agentproxy.pageant'),
    exclude('com.intellij.sdk.community', 'jsch.agentproxy.sshagent'),
    exclude('com.intellij.sdk.community', 'jsch.agentproxy.usocket-jna'),
    exclude('com.intellij.sdk.community', 'jsch.agentproxy.usocket-nc'),
    exclude('com.intellij.sdk.community', 'jsr173_1.0_api'),
    exclude('com.intellij.sdk.community', 'junit'),
    exclude('com.intellij.sdk.community', 'junit'),
    exclude('com.intellij.sdk.community', 'kotlin-reflect'),
    exclude('com.intellij.sdk.community', 'kotlin-runtime'),
    exclude('com.intellij.sdk.community', 'log4j'),
    exclude('com.intellij.sdk.community', 'markdownj-core'),
    exclude('com.intellij.sdk.community', 'microba'),
    exclude('com.intellij.sdk.community', 'miglayout-core'),
    exclude('com.intellij.sdk.community', 'miglayout-swing'),
    exclude('com.intellij.sdk.community', 'nanoxml'),
    exclude('com.intellij.sdk.community', 'nekohtml'),
    exclude('com.intellij.sdk.community', 'netty-all-4.1.5.Final'),
    exclude('com.intellij.sdk.community', 'openapi'),
    exclude('com.intellij.sdk.community', 'optimizedFileManager'),
    exclude('com.intellij.sdk.community', 'oromatcher'),
    exclude('com.intellij.sdk.community', 'picocontainer'),
    exclude('com.intellij.sdk.community', 'protobuf'),
    exclude('com.intellij.sdk.community', 'proxy-vole_20131209'),
    exclude('com.intellij.sdk.community', 'pty4j'),
    exclude('com.intellij.sdk.community', 'purejavacomm'),
    exclude('com.intellij.sdk.community', 'resolver'),
    exclude('com.intellij.sdk.community', 'resources'),
    exclude('com.intellij.sdk.community', 'resources_en'),
    exclude('com.intellij.sdk.community', 'rngom-20051226-patched'),
    exclude('com.intellij.sdk.community', 'sanselan'),
    exclude('com.intellij.sdk.community', 'serviceMessages'),
    exclude('com.intellij.sdk.community', 'sherpa-solver'),
    exclude('com.intellij.sdk.community', 'slf4j-api'),
    exclude('com.intellij.sdk.community', 'slf4j-log4j12'),
    exclude('com.intellij.sdk.community', 'snappy-in-java'),
    exclude('com.intellij.sdk.community', 'sqlite-jdbc'),
    exclude('com.intellij.sdk.community', 'streamex'),
    exclude('com.intellij.sdk.community', 'swingx-core'),
    exclude('com.intellij.sdk.community', 'trang-core'),
    exclude('com.intellij.sdk.community', 'trove4j'),
    exclude('com.intellij.sdk.community', 'util'),
    exclude('com.intellij.sdk.community', 'velocity'),
    exclude('com.intellij.sdk.community', 'winp'),
    exclude('com.intellij.sdk.community', 'xbean'),
    exclude('com.intellij.sdk.community', 'xercesImpl'),
    exclude('com.intellij.sdk.community', 'xml-apis-ext'),
    exclude('com.intellij.sdk.community', 'xml-apis'),
    exclude('com.intellij.sdk.community', 'xmlgraphics-commons'),
    exclude('com.intellij.sdk.community', 'xmlrpc'),
    exclude('com.intellij.sdk.community', 'xpp3'),
    exclude('com.intellij.sdk.community', 'xstream'),
    exclude('jdk', 'sa-jdi'),
    exclude('jdk', 'tools'),
    exclude('com.intellij.plugins', 'idea-junit'),
    exclude('com.intellij.plugins', 'junit-jupiter-api'),
    exclude('com.intellij.plugins', 'junit-jupiter-engine'),
    exclude('com.intellij.plugins', 'junit-platform-commons'),
    exclude('com.intellij.plugins', 'junit-platform-engine'),
    exclude('com.intellij.plugins', 'junit-platform-launcher'),
    exclude('com.intellij.plugins', 'junit-platform-runner'),
    exclude('com.intellij.plugins', 'junit-rt'),
    exclude('com.intellij.plugins', 'junit-vintage-engine'),
    exclude('com.intellij.plugins', 'junit5-rt'),
    exclude('com.intellij.plugins', 'opentest4j'),
    exclude('com.intellij.plugins', 'resources_en'),
    exclude('com.intellij.plugins', 'scala-plugin'),
    exclude('com.intellij.plugins', 'scala-jps-plugin'),
    exclude('com.intellij.plugins', 'scala-play-2-jps-plugin'),
    exclude('com.intellij.plugins', 'compiler-settings'),
    exclude('org.scalameta', 'trees_2.11'),
    exclude('com.intellij.plugins', 'python'),
    exclude('com.intellij.plugins', 'external-system-test-api'),

    # Ivy transitive resolve scalameta
    exclude('org.scalameta', 'scalameta'),
    exclude('org.scalameta', 'common_2.11'),
    exclude('org.scalameta', 'dialects_2.11'),
    exclude('org.scalameta', 'inputs_2.11'),
    exclude('org.scalameta', 'tokenizers_2.11'),
    exclude('org.scalameta', 'tokens_2.11'),
    exclude('org.scalameta', 'trees_2.11'),

    exclude('com.lihaoyi', 'scalaparse_2.11'),
    exclude('com.lihaoyi', 'fastparse_2.11'),
    exclude('com.lihaoyi', 'fastparse-utils_2.11'),
    exclude('com.lihaoyi', 'sourcecode_2.11'),
  ],
)
