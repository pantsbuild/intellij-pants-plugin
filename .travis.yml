# Enables support for a docker container-based build
# which should provide faster startup times and beefier
# "machines". This is also required in order to use the
# cache configured below.
sudo: false

language: java
jdk:
  - oraclejdk7

notifications:
  email:
    - yic@twitter.com
    - fedor.korotkov@gmail.com

install: ./scripts/setup-ci-environment.sh

# General policy is to support pants for the past 10 releases and the current master
env:
  matrix:
    - IJ_ULTIMATE=false
    - IJ_ULTIMATE=true
    - PANTS_SHA="release_0.0.69" TEST_SET=integration
    - PANTS_SHA="release_0.0.68" TEST_SET=integration
    - PANTS_SHA="release_0.0.67" TEST_SET=integration
    - PANTS_SHA="release_0.0.66" TEST_SET=integration
    - PANTS_SHA="release_0.0.65" TEST_SET=integration
    - PANTS_SHA="release_0.0.64" TEST_SET=integration
    - PANTS_SHA="release_0.0.63" TEST_SET=integration
    - PANTS_SHA="release_0.0.62" TEST_SET=integration
    - PANTS_SHA="release_0.0.61" TEST_SET=integration
    - PANTS_SHA="release_0.0.60" TEST_SET=integration

script:
  - ./scripts/run-tests-ci.sh
  # todo: custom integration tests cause Travis-CI builds to hang after enabling caching.
  # - ./scripts/run-custom-integration.sh
  #     -r ./.cache/pants
  #     -t examples/src/scala/org/pantsbuild/example/hello,examples/src/java/org/pantsbuild/example/hello
